#include <STM32F4XX.H>
#include <STM32F4XX_RCC.H>
#include <STM32F4XX_TIM.H>
#include <STM32F4XX_ADC.H>
#include <STM32F4XX_DMA.H>
#include <STM32F4XX_GPIO.H>
#include <MISC.H>

#include <arm_math.h>

#define Sample_Size		2048

uint16_t Sample[(Sample_Size/2)] = { 0x2020 ,0x2021 ,0x2026 ,0x201a ,0x7c ,0x75 ,0x6c ,0x64 ,0x5d ,0x57 ,0x54 ,0x53 ,0x54 ,0x59 ,0x5f ,0x66 ,0x6e ,0x75 ,0x7b ,0x20ac ,0x192 ,0x2026 ,0x2026 ,0x201e ,0x192 ,0x201a ,0x20ac ,0x7f ,0x7f ,0x7f ,0x7e ,0x7e ,0x7e ,0x7d ,0x7c ,0x7c ,0x7c ,0x7e ,0x20ac ,0x192 ,0x2c6 ,0x152 ,0x2018 ,0x2022 ,0x2dc ,0x161 ,0x161 ,0x2dc ,0x201d ,0x8f ,0x160 ,0x2026 ,0x20ac ,0x7c ,0x7a ,0x79 ,0x7a ,0x7b ,0x7d ,0x7f ,0x81 ,0x201a ,0x201e ,0x201e ,0x2026 ,0x2026 ,0x2026 ,0x2026 ,0x2026 ,0x2026 ,0x201e ,0x192 ,0x81 ,0x7f ,0x7b ,0x77 ,0x72 ,0x6d ,0x69 ,0x65 ,0x63 ,0x63 ,0x64 ,0x67 ,0x6b ,0x70 ,0x75 ,0x7a ,0x7e ,0x20ac ,0x20ac ,0x7e ,0x7a ,0x74 ,0x6d ,0x66 ,0x5f ,0x59 ,0x55 ,0x53 ,0x55 ,0x59 ,0x5f ,0x68 ,0x71 ,0x7b ,0x201e ,0x2039 ,0x8f ,0x2018 ,0x8f ,0x2039 ,0x201e ,0x7c ,0x73 ,0x6b ,0x64 ,0x60 ,0x5e ,0x5e ,0x62 ,0x68 ,0x71 ,0x7a ,0x192 ,0x152 ,0x201d ,0x161 ,0x17e ,0xa0 ,0xa0 ,0x17e ,0x203a ,0x2014 ,0x2019 ,0x17d ,0x160 ,0x2020 ,0x192 ,0x81 ,0x7f ,0x7e ,0x7e ,0x7e ,0x7e ,0x7f ,0x20ac ,0x81 ,0x201a ,0x201e ,0x2020 ,0x2030 ,0x2039 ,0x8d ,0x8f ,0x8f ,0x8f ,0x17d ,0x2039 ,0x2c6 ,0x192 ,0x7e ,0x79 ,0x74 ,0x6f ,0x6c ,0x6b ,0x6b ,0x6d ,0x71 ,0x75 ,0x7b ,0x20ac ,0x2026 ,0x2030 ,0x2039 ,0x8d ,0x152 ,0x160 ,0x2021 ,0x192 ,0x7e ,0x79 ,0x74 ,0x6f ,0x6b ,0x67 ,0x64 ,0x62 ,0x61 ,0x61 ,0x62 ,0x64 ,0x68 ,0x6c ,0x70 ,0x75 ,0x7a ,0x7e ,0x20ac ,0x201a ,0x81 ,0x7e ,0x79 ,0x73 ,0x6c ,0x65 ,0x5f ,0x5a ,0x58 ,0x57 ,0x59 ,0x5e ,0x64 ,0x6c ,0x75 ,0x7d ,0x201e ,0x160 ,0x8d ,0x8f ,0x8f ,0x17d ,0x2039 ,0x2c6 ,0x201e ,0x81 ,0x7e ,0x7c ,0x7c ,0x7c ,0x7d ,0x7f ,0x81 ,0x201e ,0x2c6 ,0x2039 ,0x8f ,0x2019 ,0x2022 ,0x2dc ,0x2122 ,0x161 ,0x2122 ,0x2014 ,0x201d ,0x90 ,0x2039 ,0x2026 ,0x7f ,0x79 ,0x75 ,0x71 ,0x6e ,0x6d ,0x6d ,0x6f ,0x71 ,0x75 ,0x79 ,0x7d ,0x81 ,0x2026 ,0x2c6 ,0x2039 ,0x8d ,0x17d ,0x8d ,0x152 ,0x2030 ,0x2020 ,0x81 ,0x7c ,0x76 ,0x70 ,0x69 ,0x63 ,0x5f ,0x5b ,0x59 ,0x59 ,0x5c ,0x60 ,0x66 ,0x6d ,0x74 ,0x7c ,0x201a ,0x2020 ,0x2030 ,0x2c6 ,0x2020 ,0x81 ,0x7b ,0x73 ,0x6c ,0x66 ,0x61 ,0x5f ,0x5f ,0x61 ,0x66 ,0x6c ,0x73 ,0x7a ,0x81 ,0x2020 ,0x160 ,0x152 ,0x152 ,0x2039 ,0x160 ,0x2021 ,0x201e ,0x201a ,0x20ac ,0x7e ,0x7d ,0x7d ,0x7d ,0x7d ,0x7e ,0x7f ,0x81 ,0x192 ,0x2020 ,0x2030 ,0x8d ,0x90 ,0x201d ,0x2013 ,0x2dc ,0x2dc ,0x2013 ,0x201c ,0x17d ,0x2c6 ,0x201a ,0x7c ,0x77 ,0x73 ,0x71 ,0x70 ,0x71 ,0x73 ,0x76 ,0x79 ,0x7c ,0x7f ,0x20ac ,0x81 ,0x81 ,0x81 ,0x20ac ,0x20ac ,0x7f ,0x20ac ,0x20ac ,0x20ac ,0x20ac ,0x20ac ,0x7e ,0x7c ,0x78 ,0x73 ,0x6e ,0x69 ,0x65 ,0x62 ,0x60 ,0x61 ,0x63 ,0x67 ,0x6c ,0x72 ,0x78 ,0x7d ,0x201a ,0x2026 ,0x2020 ,0x2026 ,0x201a ,0x7e ,0x79 ,0x73 ,0x6d ,0x67 ,0x61 ,0x5b ,0x58 ,0x55 ,0x55 ,0x57 ,0x5b ,0x61 ,0x69 ,0x72 ,0x7c ,0x2020 ,0x8f ,0x2022 ,0x2122 ,0x203a ,0x2122 ,0x201d ,0x8d ,0x2020 ,0x7e ,0x77 ,0x73 ,0x71 ,0x73 ,0x77 ,0x7f ,0x2c6 ,0x2019 ,0x203a ,0xa3 ,0xa9 ,0xac ,0xac ,0xa9 ,0xa4 ,0x17e ,0x2014 ,0x90 ,0x2039 ,0x2020 ,0x192 ,0x81 ,0x7f ,0x7f ,0x7e ,0x7d ,0x7b ,0x79 ,0x76 ,0x74 ,0x73 ,0x73 ,0x75 ,0x79 ,0x7e ,0x2026 ,0x152 ,0x201c ,0x2122 ,0x9d ,0x17e ,0x153 ,0x2dc ,0x90 ,0x2020 ,0x7b ,0x71 ,0x67 ,0x5f ,0x5a ,0x58 ,0x59 ,0x5d ,0x63 ,0x6a ,0x72 ,0x79 ,0x7f ,0x201e ,0x2021 ,0x2c6 ,0x2021 ,0x2026 ,0x81 ,0x7c ,0x78 ,0x73 ,0x6e ,0x6a ,0x67 ,0x64 ,0x63 ,0x63 ,0x64 ,0x66 ,0x6a ,0x6f ,0x75 ,0x7c ,0x192 ,0x2030 ,0x17d ,0x2018 ,0x201c ,0x201c ,0x2018 ,0x8d ,0x2c6 ,0x192 ,0x7e ,0x7a ,0x78 ,0x78 ,0x7a ,0x7e ,0x201e ,0x2039 ,0x2019 ,0x2122 ,0x178 ,0xa4 ,0xa7 ,0xa7 ,0xa5 ,0xa2 ,0x9d ,0x2014 ,0x2018 ,0x152 ,0x2021 ,0x192 ,0x20ac ,0x7e ,0x7d ,0x7d ,0x7d ,0x7e ,0x7e ,0x7f ,0x7f ,0x20ac ,0x81 ,0x81 ,0x201a ,0x192 ,0x201e ,0x2026 ,0x2020 ,0x2020 ,0x2020 ,0x2020 ,0x2026 ,0x192 ,0x81 ,0x7f ,0x7c ,0x79 ,0x76 ,0x74 ,0x72 ,0x70 ,0x6f ,0x6f ,0x70 ,0x71 ,0x74 ,0x77 ,0x7a ,0x7e ,0x81 ,0x192 ,0x2026 ,0x2026 ,0x192 ,0x20ac ,0x7c ,0x77 ,0x72 ,0x6c ,0x67 ,0x63 ,0x61 ,0x60 ,0x61 ,0x64 ,0x68 ,0x6d ,0x72 ,0x77 ,0x7b ,0x7f ,0x201a ,0x192 ,0x201e ,0x192 ,0x201a ,0x20ac ,0x7e ,0x7c ,0x7b ,0x7b ,0x7c ,0x7e ,0x81 ,0x2026 ,0x160 ,0x8f ,0x201d ,0x2122 ,0x9d ,0x178 ,0xa1 ,0xa0 ,0x17e ,0x203a ,0x2014 ,0x2019 ,0x8d ,0x2c6 ,0x201e ,0x20ac ,0x7e ,0x7d ,0x7c ,0x7c ,0x7d ,0x7e ,0x7e ,0x7f ,0x20ac ,0x81 ,0x201a ,0x192 ,0x201e ,0x2026 ,0x2026 ,0x2020 ,0x2020 ,0x2026 ,0x201e ,0x201a ,0x20ac ,0x7d ,0x7a ,0x77 ,0x74 ,0x72 ,0x72 ,0x72 ,0x73 ,0x75 ,0x78 ,0x7b ,0x7e ,0x81 ,0x192 ,0x201e ,0x201e ,0x192 ,0x20ac ,0x7d ,0x79 ,0x74 ,0x6f ,0x6a ,0x66 ,0x62 ,0x5f ,0x5e ,0x5d ,0x5e ,0x60 ,0x63 ,0x68 ,0x6d ,0x73 ,0x79 ,0x7f ,0x2026 ,0x2030 ,0x8d ,0x8f ,0x8f ,0x8d ,0x2030 ,0x201e ,0x7d ,0x75 ,0x6d ,0x66 ,0x61 ,0x5e ,0x5f ,0x63 ,0x69 ,0x73 ,0x7e ,0x160 ,0x2022 ,0x178 ,0xa6 ,0xab ,0xab ,0xa8 ,0xa2 ,0x203a ,0x2019 ,0x2030 ,0x81 ,0x7b ,0x78 ,0x77 ,0x78 ,0x7c ,0x20ac ,0x2026 ,0x2030 ,0x152 ,0x17d ,0x17d ,0x8d ,0x160 ,0x2021 ,0x192 ,0x20ac ,0x7e ,0x7c ,0x7b ,0x7c ,0x7d ,0x7e ,0x20ac ,0x81 ,0x201a ,0x201a ,0x201a ,0x201a ,0x81 ,0x7f ,0x7e ,0x7d ,0x7d ,0x7d ,0x7d ,0x7e ,0x20ac ,0x81 ,0x192 ,0x201e ,0x201e ,0x192 ,0x81 ,0x7d ,0x79 ,0x73 ,0x6d ,0x66 ,0x60 ,0x5b ,0x58 ,0x56 ,0x56 ,0x58 ,0x5c ,0x61 ,0x67 ,0x6e ,0x74 ,0x7a ,0x7f ,0x192 ,0x2026 ,0x2020 ,0x2020 ,0x201e ,0x81 ,0x7d ,0x79 ,0x75 ,0x71 ,0x6e ,0x6c ,0x6c ,0x6d ,0x70 ,0x75 ,0x7b ,0x192 ,0x160 ,0x2019 ,0x2122 ,0x178 ,0xa3 ,0xa4 ,0xa4 ,0xa1 ,0x153 ,0x2014 ,0x90 ,0x160 ,0x201e ,0x7f ,0x7c ,0x7b ,0x7a ,0x7b ,0x7d ,0x20ac ,0x192 ,0x2020 ,0x2030 ,0x2039 ,0x8d ,0x17d ,0x17d ,0x17d ,0x17d ,0x152 ,0x2039 ,0x2030 ,0x2021 ,0x2026 ,0x201a ,0x20ac ,0x7d ,0x7b ,0x79 ,0x78 ,0x77 ,0x77 ,0x78 ,0x7a ,0x7d ,0x20ac ,0x201e ,0x2030 ,0x8d ,0x90 ,0x201c ,0x201c ,0x2019 ,0x17d ,0x2021 ,0x7f ,0x74 ,0x69 ,0x5e ,0x53 ,0x4b ,0x46 ,0x44 ,0x46 ,0x4c ,0x56 ,0x62 ,0x6e ,0x7a ,0x201e ,0x152 ,0x8f ,0x8d ,0x2021 ,0x7e ,0x73 ,0x66 ,0x5a ,0x51 ,0x4b ,0x4a ,0x4d ,0x55 ,0x61 ,0x70 ,0x20ac ,0x8f ,0x153 ,0xa6 ,0xac ,0xad ,0xab ,0xa4 ,0x203a ,0x2018 ,0x2021 ,0x7e ,0x78 ,0x74 ,0x74 ,0x77 ,0x7d ,0x2026 ,0x17d ,0x2013 ,0x178 ,0xa5 ,0xa9 ,0xab ,0xab ,0xa8 ,0xa3 ,0x9d ,0x2013 ,0x90 ,0x160 ,0x2026 ,0x81 ,0x7e ,0x7d ,0x7d ,0x7d ,0x7f ,0x20ac ,0x81 ,0x81 ,0x201a ,0x81 ,0x81 ,0x20ac ,0x7e ,0x7e ,0x7d ,0x7d ,0x7e ,0x7f ,0x20ac ,0x201a ,0x192 ,0x192 ,0x201a ,0x81 ,0x7e ,0x7a ,0x75 ,0x70 ,0x6c ,0x69 ,0x67 ,0x67 ,0x69 ,0x6c ,0x70 ,0x74 ,0x78 ,0x7b ,0x7c ,0x7b ,0x77 ,0x72 ,0x6b ,0x63 ,0x5c ,0x56 ,0x52 ,0x50 ,0x51 ,0x55 ,0x5b ,0x62 ,0x6a ,0x71 ,0x78 ,0x7e ,0x201a ,0x201e ,0x2026 ,0x201e ,0x192 ,0x81 ,0x20ac ,0x7e ,0x7d ,0x7d ,0x7d ,0x7d ,0x7e ,0x7e ,0x7f ,0x20ac ,0x201a ,0x192 ,0x2020 ,0x2c6 ,0x2039 ,0x17d ,0x90 ,0x201c ,0x201d ,0x2022 ,0x201d ,0x201c ,0x90 ,0x8d ,0x2030 ,0x2026 ,0x201a ,0x7f ,0x7d ,0x7c ,0x7c ,0x7d ,0x7e ,0x7f ,0x81 ,0x81 ,0x201a ,0x201a ,0x81 ,0x20ac ,0x7f ,0x7e ,0x7d ,0x7d ,0x7d ,0x7e ,0x7f ,0x81 ,0x201a ,0x192 ,0x192 ,0x201a ,0x81 ,0x7e ,0x7b ,0x78 ,0x74 ,0x71 ,0x6f ,0x6d ,0x6d ,0x6e ,0x70 ,0x74 ,0x78 ,0x7c ,0x20ac ,0x7c ,0x20ac };
float32_t	Input[Sample_Size];
float32_t	Output[Sample_Size];


int main()
{
	SystemInit();

	arm_cfft_radix4_instance_f32 Test;
	uint16_t i;

	for(i=0; i<Sample_Size; i=i+2)
	{
		Input[i] = (float32_t)Sample[i];
		Input[i+1] = 0;
	}

	arm_cfft_radix4_init_f32(&Test, (Sample_Size/2), 0, 1);
	arm_cfft_radix4_f32(&Test, Input);
	arm_cmplx_mag_f32(Input, Output, (Sample_Size/2));

	while(1);
}
